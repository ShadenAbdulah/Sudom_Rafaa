<!DOCTYPE html>
<html lang="ar" dir="rtl">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Lookup</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap"
      rel="stylesheet">
  </head>

  <body class="min-h-screen flex flex-col items-center justify-center p-4 font-[Tajawal]">

    <img src="logo.png" class="w-20 mb-10">

    <div class="relative w-full max-w-xs">
      <input type="text" id="studentId"
        class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="ادخل رقم الطالب.." />
      <button onclick="lookup()" class="">
        <svg class="absolute left-3 top-1/3 transform -translate-y-1/2 text-gray-500 w-5 h-5 hover:fill-[#306F64]"
          xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
        </svg>
      </button>
    </div>

    <p id="statusMessage" class="mt-4 text-center text-sm text-gray-600 hidden"></p>

    <div class="hidden" id="result">
      <div class="grid grid-rows-3 gap-4 mt-10 w-full px-3">
        <p class="text-center font-bold text-2xl" id="name">وسن عبدالرحمن الحربي</p>

        <div class="flex flex-row gap-5 items-center justify-center">
          <p class="bg-[#C5B69C] text-white px-5 pt-1 w-fit h-fit rounded-full font-regular text-xs" id="id">65337308743
          </p>
          <div class="bg-[#306F64] text-white px-5 pt-1 w-fit h-fit rounded-full font-regular text-xs flex gap-1">
            <p> الدفعة</p>
            <p id="group">الخامسة</p>
          </div>
        </div>

        <div class="flex flex-row gap-5 items-center justify-center">
          <div class="flex flex-row gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#C5B69C" class="size-4">
              <path fill-rule="evenodd"
                d="M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z"
                clip-rule="evenodd" />
            </svg>
            <p id="phone">0506459909</p>
          </div>

          <div class="flex flex-row gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#C5B69C" class="size-4">
              <path fill-rule="evenodd"
                d="M3 2.25a.75.75 0 0 1 .75.75v.54l1.838-.46a9.75 9.75 0 0 1 6.725.738l.108.054A8.25 8.25 0 0 0 18 4.524l3.11-.732a.75.75 0 0 1 .917.81 47.784 47.784 0 0 0 .005 10.337.75.75 0 0 1-.574.812l-3.114.733a9.75 9.75 0 0 1-6.594-.77l-.108-.054a8.25 8.25 0 0 0-5.69-.625l-2.202.55V21a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 3 2.25Z"
                clip-rule="evenodd" />
            </svg>
            <p id="nat">سعودية</p>
          </div>
        </div>
      </div>

      <div class="grid grid-rows gap-10 my-10">
        <div class="grid grid-flow-col grid-cols-4 grid-rows-3 gap-4 w-full">
          <div class="rounded-lg row-span-3 bg-[#C5B69C] text-white text-center h-full font-bold text-lg">
            <p class="align-middle my-16">الفصل الأول</p>
          </div>
          <div class="relative flex-row gap-2 rounded-lg col-span-3 border border-[#C5B69C] items-center">
            <div class="absolute text-xs bg-white mt-[-6px] mr-[20px] px-[10px]">
              <p>المراجعـــــــة</p>
            </div>
            <div class="my-3 px-1">
              <p id="sem1_achive" class="">
                من سورة المرسلات إلى سورة المعارج.
              </p>
            </div>
          </div>
          <div class="col-span-3 grid grid-flow-col grid-cols-2 gap-5">
            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-7 items-center text-center">
                <p>الحضور</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem1_pres">
                  10/10
                </p>
              </div>
            </div>

            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-7 items-center text-center">
                <p>التدبــــــــــــــــر</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem1_assign">
                  10/10
                </p>
              </div>
            </div>
          </div>

          <div class="col-span-3 grid grid-flow-col grid-cols-2 gap-5">
            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-3 items-center text-center">
                <p>الإختبار الفصلي</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem1_mid">
                  10/10
                </p>
              </div>
            </div>

            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-3 items-center text-center">
                <p>الإختبار النهائي</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem1_final">
                  10/10
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-flow-col grid-cols-4 grid-rows-3 gap-4 w-full">
          <div class="rounded-lg row-span-3 bg-[#306F64] text-white text-center h-full font-bold text-lg">
            <p class="align-middle my-16">الفصل الثاني</p>
          </div>
          <div class="relative flex-row gap-2 rounded-lg col-span-3 border border-[#306F64] items-center">
            <div class="absolute text-xs bg-white mt-[-6px] mr-[20px] px-[10px]">
              <p>المراجعـــــــة</p>
            </div>
            <div class="my-3 px-1">
              <p id="sem2_achive" class="">
                من سورة المرسلات إلى سورة المعارج.
              </p>
            </div>
          </div>
          <div class="col-span-3 grid grid-flow-col grid-cols-2 gap-5">
            <div class="relative flex-row gap-2 rounded-lg border border-[#306F64] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-7 items-center text-center">
                <p>الحضور</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem2_pres">
                  10/10
                </p>
              </div>
            </div>

            <div class="relative flex-row gap-2 rounded-lg border border-[#306F64] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-7 items-center text-center">
                <p>التدبــــــــــــــــر</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem2_assign">
                  10/10
                </p>
              </div>
            </div>
          </div>

          <div class="col-span-3 grid grid-flow-col grid-cols-2 gap-5">
            <div class="relative flex-row gap-2 rounded-lg border border-[#306F64] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-3 items-center text-center">
                <p>الإختبار الفصلي</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem2_mid">
                  10/10
                </p>
              </div>
            </div>

            <div class="relative flex-row gap-2 rounded-lg border border-[#306F64] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-3 items-center text-center">
                <p>الإختبار النهائي</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem2_final">
                  10/10
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-flow-col grid-cols-4 grid-rows-3 gap-4 w-full">
          <div class="rounded-lg row-span-3 bg-[#C5B69C] text-white text-center h-full font-bold text-lg">
            <p class="align-middle my-16">الفصل الثالث</p>
          </div>
          <div class="relative flex-row gap-2 rounded-lg col-span-3 border border-[#C5B69C] items-center">
            <div class="absolute text-xs bg-white mt-[-6px] mr-[20px] px-[10px]">
              <p>المراجعـــــــة</p>
            </div>
            <div class="my-3 px-1">
              <p id="sem3_achive" class="">
                من سورة المرسلات إلى سورة المعارج.
              </p>
            </div>
          </div>
          <div class="col-span-3 grid grid-flow-col grid-cols-2 gap-5">
            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-7 items-center text-center">
                <p>الحضور</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem3_pres">
                  10/10
                </p>
              </div>
            </div>

            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-7 items-center text-center">
                <p>التدبــــــــــــــــر</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem3_assign">
                  10/10
                </p>
              </div>
            </div>
          </div>

          <div class="col-span-3 grid grid-flow-col grid-cols-2 gap-5">
            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-3 items-center text-center">
                <p>الإختبار الفصلي</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem3_mid">
                  10/10
                </p>
              </div>
            </div>

            <div class="relative flex-row gap-2 rounded-lg border border-[#C5B69C] items-center">
              <div class="absolute font-regular text-xs bg-white mt-[-6px] px-[10px] mx-3 items-center text-center">
                <p>الإختبار النهائي</p>
              </div>
              <div class="mt-4 mx-auto text-center">
                <p id="sem3_final">
                  10/10
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-row h-16">
          <div class="bg-[#306F64] w-1/3 rounded-lg text-white text-center h-full font-bold text-md">
            <p class="my-5">المراجعة الكلية</p>
          </div>
          <div class="border border-[#306F64] border-r-0 w-2/3 rounded-lg rounded-r-none mr-[-5px]">
            <p class="my-2 mx-4" id="all_achive">
              من سورة المرسلات إلى سورة المعارج.
            </p>
          </div>

        </div>
      </div>
    </div>

    <script>
      async function lookup() {
        const result = document.getElementById("result");
        const statusMessage = document.getElementById("statusMessage");
        const input = document.getElementById("studentId");
        const id = input.value.trim();
        const button = document.querySelector("button");
        const url = `https://script.google.com/macros/s/AKfycby57DakOUB2hG65AxE3vbHoXlkv-uO3bbx95BnET1_XO5aUvqXMfOyyZ_PukBRSxXLm/exec?id=${id}`;

        if (!id) {
          statusMessage.textContent = "يرجى إدخال رقم الطالب";
          statusMessage.classList.remove("hidden");
          result.classList.add("hidden");
          return;
        }

        // Show loading message
        statusMessage.textContent = "جاري البحث...";
        statusMessage.classList.remove("hidden");
        result.classList.add("hidden");
        input.disabled = true;
        button.disabled = true;

        try {
          const response = await fetch(url);
          const data = await response.json();

          if (data.error) {
            statusMessage.textContent = "لم يتم العثور على الطالب";
            result.classList.add("hidden");
          } else {
            statusMessage.classList.add("hidden");
            result.classList.remove("hidden");

            // Populate the data
            document.getElementById("name").innerHTML = data.name || "";
            document.getElementById("id").innerHTML = data.id || "";
            document.getElementById("group").innerHTML = data.group || "";
            document.getElementById("phone").innerHTML = data.phone || "";

            document.getElementById("sem1_achive").innerHTML = data.sem1_achive || "";
            document.getElementById("sem1_pres").innerHTML = data.sem1_pres || "";
            document.getElementById("sem1_assign").innerHTML = data.sem1_assign || "";
            document.getElementById("sem1_mid").innerHTML = data.sem1_mid || "";
            document.getElementById("sem1_final").innerHTML = data.sem1_final || "";

            document.getElementById("sem2_achive").innerHTML = data.sem2_achive || "";
            document.getElementById("sem2_pres").innerHTML = data.sem2_pres || "";
            document.getElementById("sem2_assign").innerHTML = data.sem2_assign || "";
            document.getElementById("sem2_mid").innerHTML = data.sem2_mid || "";
            document.getElementById("sem2_final").innerHTML = data.sem2_final || "";

            document.getElementById("sem3_achive").innerHTML = data.sem3_achive || "";
            document.getElementById("sem3_pres").innerHTML = data.sem3_pres || "";
            document.getElementById("sem3_assign").innerHTML = data.sem3_assign || "";
            document.getElementById("sem3_mid").innerHTML = data.sem3_mid || "";
            document.getElementById("sem3_final").innerHTML = data.sem3_final || "";

            document.getElementById("all_achive").innerHTML = data.all_achive || "";
          }
        } catch (error) {
          statusMessage.textContent = "حدث خطأ أثناء البحث";
          result.classList.add("hidden");
        } finally {
          input.disabled = false;
          button.disabled = false;
        }
      }
    </script>

  </body>

</html>